<!doctype html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>Solution UI</title>
		
		<link rel="stylesheet" href="css/common.css">
		<link rel="stylesheet" href="css/style.css">
		<script src="js/jquery.min.js"></script>
		<script src="js/bootstrap.bundle.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/wordcloud@1.2.2/src/wordcloud2.js"></script>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gridstack@10.1.2/dist/gridstack.min.css">
		<script src="https://cdn.jsdelivr.net/npm/gridstack@10.1.2/dist/gridstack-all.js"></script>
		<script src="js/common.js"></script>
		<script src="js/icon.js"></script>
		<script src="js/graph-sample.js"></script>
		<style>
			body{--c-main-sub1:rgba(255, 116, 116, 0.1);}
			html, body {overflow-x: hidden !important;}
			.demobox {height:250px;border:1px solid rgba(255,255,255,0.1);padding:10px 5px;overflow-y: hidden !important;}
			.demobox > .ztna{animation:demoAnimation1 7s infinite alternate ease-in-out;}
			.dash-title{font-size:1.05em; color:var(--c-ligray) !important; font-weight:500;}
			.demotable .demofont{width:120px;font-size:3em !important;font-weight:600;padding-top:0px;}
			.dash-count{font-size:3em !important;font-weight:600;text-align:center;padding:15px 0;}
			.demotable{margin:10px 0;padding:0;}
			.demotable tr td{line-height:22px;padding:0;height:22px !important;}
			.back .table thead th, .back .table tr td {font-size:12px !important; font-weight:300;text-align:center;}
			.dash-title{font-size:1em;text-align:left;font-weight:500;margin-top:0;line-height:1.2em;color:var(--c-gray) !important;}
			.dash-title .error{display:inline-block;border-radius:3px;vertical-align: middle;padding:0 5px;background-color:var(--c-red); color:#FFF;font-size:0.8em;}
			.dashbox{position: relative;min-height:180px;transition: min-height 0.3s ease, height 0.3s ease;margin-bottom: 20px;
				border:1px solid var(--border-content) !important;overflow-y: hidden !important;}
			.dash-stitle{position:absolute;bottom:20px; height:50px;}
			.dashbox.collapsed{min-height:120px !important; height: 120px !important;margin-bottom: 20px;overflow-x: hidden !important;}
			.chart-bar .dashbox.collapsed{min-height:120px !important; height: 120px !important;margin-bottom: 5px;}
			.chart-bar .dashbox{min-height:140px !important;margin-bottom: 5px;}
			.dashbox .accordion{transition: opacity 0.3s ease, max-height 0.3s ease, height 0.3s ease;
				overflow: hidden !important;max-height: 500px;height: auto;position: relative;}
			.dashbox .accordion.collapsed{max-height: 0 !important; height: 0 !important; opacity: 0; padding: 0 !important; margin: 0 !important;overflow: hidden !important;}
			
			/* GridStack 아이템에서 아코디언 높이 조정 */
			.grid-stack-item-content .dashbox.collapsed {
				height: 185px !important;
				min-height: 185px !important;
				overflow: hidden;
			}
			
			.grid-stack-item.collapsed-height-1 .grid-stack-item-content {
				overflow: hidden !important;
			}
			
			/* GridStack 아이템 높이 직접 조정 - 185px로 강제 설정 */
			.grid-stack-item.collapsed-height-1 {
				height: 185px !important;
				min-height: 185px !important;
			}
			
			.grid-stack-item.collapsed-height-1 .grid-stack-item-content {
				height: 185px !important;
			}
			
			.grid-stack-item-content .dashbox.collapsed .dash-title {
				position: absolute;
				top: 50%;
				left: 50%;
				transform: translate(-50%, -50%);
				margin: 0;
				width: 100%;
				text-align: center;
				z-index: 10;
			}
			.dot{display:inline-block;width:10px; height:10px; border-radius:50%;vertical-align: middle;margin-left:10px;}
			.dot.ok{background-color:var(--c-green);}
			.dot.error{background-color:var(--c-red);animation:demoAnimation1 1s infinite alternate ease-in-out;}
			.dash-graph-box{height:190px;}
			.dash-graph-box canvas{height:180px !important; width: 100% !important;}
			.dash-table-box{height:75px;}
			.wordcloud-container{height:260px !important;}
			
			/* 그래프 컨테이너 스타일 개선 */
			canvas {
				display: block !important;
				max-width: 100% !important;
				max-height: 100% !important;
			}
			
			/* 시스템 리소스 차트 스타일 */
			#cpuChart, #memChart, #hddChart {
				width: 100% !important;
				height: 120px !important;
				display: block !important;
				position: relative !important;
			}
			
			/* 트래픽 차트 스타일 */
			#iamTrafficChart, #ztnaTrafficChart, #swgBlockChart, #ztnaBlockChart, #harmfulBlockChart, #casbBlockChart, #harmfulBlockSystemChart {
				width: 100% !important;
				height: 180px !important;
				display: block !important;
				position: relative !important;
			}
			
			/* AI 사용량 차트 스타일 */
			#aiTotalUsageChart {
				width: 100% !important;
				height: 250px !important;
				display: block !important;
				position: relative !important;
			}
			
			/* 차트 컨테이너 개선 */
			.dash-graph-box {
				position: relative !important;
				width: 100% !important;
				height: 180px;
				overflow: hidden !important;
			}
			
			.dash-graph-box canvas {
				position: absolute !important;
				top: 0 !important;
				left: 0 !important;
				width: 100% !important;
				height: 100% !important;
			}
			@keyframes demoAnimation3 {
			  0% {opacity:100%;width:14px; height:14px;top:6px; right:6px;}
			  50% {opacity:100%;}
			  51% {opacity:0%;width:12px; height:12px;}
			  100% {opacity:0%;}
			}
			@keyframes demoAnimation2 {
			  0% {background-color:rgba(255,0,24,0.2);}
			  60% {background-color:rgba(255,0,24,0.1);}
			  90% {background-color:var(--bg-content);}
			  100% {background-color:var(--bg-content);}
			}
			.dashbox.error{animation:demoAnimation2 1s infinite alternate ease-in-out;border:1px solid var(--border-content) !important;}
			
			/* 워드 클라우드 스타일 */
			#wordCloud {
				background: transparent;
				border-radius: 8px;
			}
			.wordcloud-container {
				position: relative;
				width: 100%;
				height: 100%;
				display: flex;
				align-items: center;
				justify-content: center;
			}
			
			/* 시스템 접속 현황 클릭 가능한 제목 스타일 */
			.clickable-title {
				cursor: pointer;
				transition: color 0.3s ease;
				user-select: none;
			}
			
			.clickable-title:hover {
				color: var(--c-main);
			}
			
			/* front/back 화면 전환 애니메이션 */
			.front, .back {
				transition: opacity 0.3s ease, transform 0.3s ease;
			}
			
			.front {
				opacity: 1;
				transform: translateY(0);
				display: block;
				position: relative;
				width: 100%;
				height: 100%;
			}
			
			.back {
				opacity: 0;
				transform: translateY(10px);
				display: block;
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				z-index: 1;
				visibility: hidden;
				pointer-events: none;
				padding: 0;
				box-sizing: border-box;
			}
			
			.back.show {
				opacity: 1;
				transform: translateY(0);
				display: block;
				visibility: visible;
				pointer-events: auto;
			}
			
			.front.hide {
				opacity: 0;
				transform: translateY(-10px);
				display: block;
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				visibility: hidden;
				pointer-events: none;
			}
			
			/* 클릭 가능한 영역 표시 */
			.front, .back {
				cursor: pointer;
				transition: opacity 0.3s ease, transform 0.3s ease;
			}
			
			.front:hover, .back:hover {
				opacity: 0.9;
			}
			
			/* front/back 컨테이너 스타일 */
			.accordion {
				position: relative;
				overflow: hidden;
				min-height: 180px;
			}
			#chart-body .accordion{min-height:0;}
			.table thead th{height:25px !important;padding:3px 0;}
			#iamBlockChart{height:160px !important; max-height:160px !important;}
			#casbBlockChart{height:200px !important; max-height:200px !important;}
			.iam, .ztna, .swg, .casb{margin-bottom:20px;}
			.w50p > .c-box{height:300px;}
			.chart-bar{height:100%;}
			.g10{gap:10px;}
			
			/* GridStack 스타일 */
			.grid-stack {
				background: transparent;
				margin-top:-20px !important;
				margin-left:-20px !important;
				margin-bottom: 20px !important;
			}
			
			.grid-stack-item {
				background: transparent;
				padding:8px 8px !important;
				margin-bottom: 20px !important;
			}
			
			.grid-stack-item-content {
				background: var(--bg-content);
				border: var(--border-content);
				overflow: visible;
			}
			
			.grid-stack-item-removing {
				opacity: 0.8;
			}
			
			.grid-stack-item.ui-draggable-dragging {
				z-index: 1000;
				opacity: 0.8;
			}
			
			.grid-stack-item.ui-resizable-resizing {
				z-index: 1000;
			}
			
			/* 크기 조절 핸들 완전히 숨기기 */
			.grid-stack-item .ui-resizable-handle {
				display: none !important;
				visibility: hidden !important;
				opacity: 0 !important;
				pointer-events: none !important;
			}
			
			.grid-stack-item .ui-resizable-se {
				display: none !important;
				visibility: hidden !important;
				opacity: 0 !important;
				pointer-events: none !important;
			}
			
			/* 모든 크기 조절 핸들 숨기기 */
			.grid-stack-item .ui-resizable-n,
			.grid-stack-item .ui-resizable-s,
			.grid-stack-item .ui-resizable-e,
			.grid-stack-item .ui-resizable-w,
			.grid-stack-item .ui-resizable-ne,
			.grid-stack-item .ui-resizable-nw,
			.grid-stack-item .ui-resizable-sw {
				display: none !important;
				visibility: hidden !important;
				opacity: 0 !important;
				pointer-events: none !important;
			}
			
			/* 호버 시에도 크기 조절 핸들 숨기기 */
			.grid-stack-item:hover .ui-resizable-handle,
			.grid-stack-item:hover .ui-resizable-se,
			.grid-stack-item:hover .ui-resizable-n,
			.grid-stack-item:hover .ui-resizable-s,
			.grid-stack-item:hover .ui-resizable-e,
			.grid-stack-item:hover .ui-resizable-w,
			.grid-stack-item:hover .ui-resizable-ne,
			.grid-stack-item:hover .ui-resizable-nw,
			.grid-stack-item:hover .ui-resizable-sw {
				display: none !important;
				visibility: hidden !important;
				opacity: 0 !important;
				pointer-events: none !important;
			}
			
			/* 크기 조절 관련 모든 요소 숨기기 */
			.grid-stack-item *[class*="resizable"],
			.grid-stack-item *[class*="resize"] {
				display: none !important;
				visibility: hidden !important;
				opacity: 0 !important;
				pointer-events: none !important;
			}
			
			/* 드래그 중일 때 시각적 피드백 */
			.grid-stack-item.ui-draggable-dragging .dashbox {
				box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
				transform: rotate(2deg);
			}
			
			/* Accordion 토글 아이콘 스타일 */
			.accordion-toggle-icon {
				position: absolute !important;
				top: 10px !important;
				right: 10px !important;
				width: 20px !important;
				height: 20px !important;
				cursor: pointer !important;
				z-index: 1000 !important;
				pointer-events: auto !important;
				background: rgba(0, 0, 0, 0.1) !important;
				border-radius: 3px !important;
				display: flex !important;
				align-items: center !important;
				justify-content: center !important;
				transition: background-color 0.2s ease !important;
			}
			
			.accordion-toggle-icon:hover {
				background: rgba(0, 0, 0, 0.2) !important;
			}
			
			.accordion-toggle-icon i {
				color: rgba(255, 255, 255, 0.6) !important;
				font-size: 12px !important;
				transition: color 0.2s ease !important;
			}
			
			.accordion-toggle-icon:hover i {
				color: rgba(255, 255, 255, 0.9) !important;
			}
			
			/* GridStack 드래그 핸들과 accordion 아이콘 충돌 방지 */
			.grid-stack-item .dashbox {
				position: relative !important;
			}
			
			.grid-stack-item .dashbox .accordion-toggle-icon {
				pointer-events: auto !important;
				z-index: 1001 !important;
			}
			
			/* 드래그 중일 때도 accordion 아이콘은 클릭 가능하도록 */
			.grid-stack-item.ui-draggable-dragging .accordion-toggle-icon {
				pointer-events: auto !important;
				z-index: 1002 !important;
			}
		</style>
	</head>
	<body class="bgcolor04">
		<div class="wrap">			
			<!--Top Head 시작-->
			<div class="top-head">
				<div class="top-left">
					<div class="logo"><a href="subpage-html.html"><img src="images/logo-sse.svg"></a></div>
					<div class="position-absolute top-50 start-0 translate-middle" style="margin-left:480px;">
						<button class="btn btn-state">MINOR <span class="fw-bold badge bgc-gray"> 0</span></button>
						<button class="btn btn-state">MAJOR <span class="fw-bold badge bgc-gray"> 3</span></button>
						<button class="btn btn-state">CRITICAL <span class="fw-bold badge bgc-red"> 0</span></button>
					</div>
				</div>
				<div class="top-right position-absolute top-50 end-0 translate-middle-y">
					<div class="input-group btn-time mr10">
						<span class="form-control">00:31</span>
						<button class="btn btn-outline-secondary" type="button">Refresh</button>
					</div>
					<select class="mr5" style="width:140px;">
						  <option selected>---사이트 선택---</option>
						  <option value="1">사이트 1</option>
						  <option value="2">사이트 2</option>
						  <option value="3">사이트 3</option>
					</select>
					<select class="mr10" style="width:100px;">
						  <option selected>admin</option>
						  <option value="1">나의 정보</option>
						  <option value="2">로그 아웃</option>
					</select>
					<ul>
						<li><i class="fa-solid fa-up-down-left-right head-icon" id="toggleAllDashbox" title="전체 접기/펴기"></i></li>
						<li><i class="fa-solid fa-comment head-icon"></i></li>
						<li><i class="fa-solid fa-circle-question head-icon"></i></li>
						<li><i class="fa-solid fa-print head-icon"></i></li>
						<li><i class="fa-solid fa-gear head-icon" id="setcolorbtn"></i></li>
					</ul>
				</div>
				<div id="setcolor" style="display:none;">
					<table>
						<tr>
							<td class="w40p">갱신주기</td>
							<td>
								<select>
									<option selected>---갱신주기---</option>
									<option>1시간</option>
								</select>
							</td>
						</tr>
						<tr>
							<td>세션 타임아웃</td>
							<td>
								<select>
									<option selected>---갱신주기---</option>
									<option>30분</option>
								</select>
							</td>
						</tr>
						<tr>
							<td>배경색</td>
							<td class="bgcolor">
								<button class="bgcolor01" id="bgcolor01"></button>
								<button class="bgcolor02" id="bgcolor02"></button>
								<button class="bgcolor03" id="bgcolor03"></button>
								<button class="bgcolor04" id="bgcolor04"></button>
								<button class="bgcolor05" id="bgcolor05"></button>
								<button class="bgcolor06" id="bgcolor06"></button>
								<button class="bgcolor07" id="bgcolor07"></button>
								<button class="bgcolor08" id="bgcolor08"></button>
								<button class="bgcolor09" id="bgcolor09"></button>
							</td>
						</tr>
						<tr style="border-bottom:0;">
							<td>기타 설정</td>
							<td>
								<label class="toggle_switch">
									<input type="checkbox">
									<span class="slider"></span>
								</label>
							</td>
						</tr>
					</table>
				</div>
			</div>
			<!--Top 끝-->
			
			<!--Left Menu 시작-->
			<div id="main" class="leftmenu">
				<div class="leftmenu-body">
					<div class="slide-btn"><i class="fa-solid fa-caret-right"></i></div>
					<div id="leftmenu" class="accordion">
						<div>
							<div class="menu-m on">
								<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#smenu1" aria-expanded="true" aria-controls="smenu1">
								<i class="fa-solid fa-database"></i> 정보
								</button>
							</div>
							<div id="smenu1" class="accordion-collapse collapse show menu-s" data-bs-parent="#leftmenu">
								<ul>
									<li class="on">일반</li>
									<li>통계</li>
									<li>실시간로그</li>
									<li>하드웨어</li>
								</ul>
							</div>
						</div>	
						<div>	
							<div class="menu-m">
								<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#smenu2" aria-expanded="false" aria-controls="smenu2">
								<i class="fa-solid fa-magnifying-glass-chart"></i> 분석
								</button>
							</div>
							<div id="smenu2" class="accordion-collapse collapse menu-s" data-bs-parent="#leftmenu">
								<ul>
									<li>클러스터링 트래픽 통계</li>
									<li>클러스터링 로그 검색</li>
									<li>트래픽 통계</li>
									<li>로그 검색</li>
									<li>리포트</li>
								 </ul>
							</div>
						</div>
						<div>
							<div class="menu-m">
								<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#smenu3" aria-expanded="false" aria-controls="smenu3">
								<i class="fa-solid fa-clipboard-check"></i> 정책
								</button>
							</div>
							<div id="smenu3" class="accordion-collapse collapse menu-s" data-bs-parent="#leftmenu">
								<ul>
									<li>클러스터링 트래픽 통계</li>
									<li>클러스터링 로그 검색</li>
									<li>트래픽 통계</li>
									<li>로그 검색</li>
									<li>리포트</li>
								 </ul>
							</div>
						</div>	
						<div>
							<div class="menu-m">
								<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#smenu4" aria-expanded="false" aria-controls="smenu4">
								<i class="fa-solid fa-eye"></i> 복호화
								</button>
							</div>
							<div id="smenu4" class="accordion-collapse collapse menu-s" data-bs-parent="#leftmenu">
								<ul>
									<li>복호화 제어</li>
									<li>미러링 설정</li>
									<li>인증서 관리</li>
									<li>서버 복호화</li>
								 </ul>
							</div>
						</div>	
						<div>
							<div class="menu-m">
								<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#smenu5" aria-expanded="false" aria-controls="smenu5">
								<i class="fa-solid fa-gear"></i> 설정
								</button>
							</div>
							<div id="smenu5" class="accordion-collapse collapse menu-s" data-bs-parent="#leftmenu">
								<ul>
									<li>네트워크</li>
									<li>라이선스</li>
									<li>시스템 관리</li>
									<li>바이패스</li>
									<li>업데이트/DB</li>
									<li>기타 설정</li>
									<li>재시작 / 종료</li>
								 </ul>
							</div>
						</div>

					</div>				
				</div>
			</div>
			<!--Left Menu 끝-->

			<!-- body 시작 -->
			<div class="container">
				<div class="d-flex justify-content-start">
					<!--좌측 그래프 시작-->
					<div class="w12p mr10">
						<div id="chart-body" class="chart-bar">
							<div class="vstack g10">	
								<div class="bg-content active dashbox">
									<div>시스템 CPU 현황</div>
									<div class="accordion">
										<div>
											<canvas id="cpuChart"></canvas>
										</div>
									</div>
									<div class="chart-data mt10">
										<p class="fs200 fw700">89<span class="fw400"> %</span></p>
									</div>
									<div class="progress">
										<div class="progress-bar error" style="width:85%;"></div>
									</div>
								</div>

								
								<div class="bg-content active dashbox">
									<div>시스템 메모리 현황</div>
									<div class="accordion">
										<div>
											<canvas id="memChart"></canvas>
										</div>	
									</div>
									<div class="chart-data mt10">
										<p class="fs200 fw700">5.88G <span class="fw400">/ 7.61G</span></p>
									</div>
									<div class="progress">
										<div class="progress-bar" style="width:25%;"></div>
									</div>
								</div>

								
								<div class="bg-content active dashbox">
									<div>시스템 Hard Disk 현황</div>
									<div class="accordion">
										<div>
											<canvas id="hddChart"></canvas>
										</div>
									</div>
									<div class="chart-data mt10">
										<p class="fs200 fw700">0<span class="fw400">/ 0</span></p>
									</div>
									<div class="progress">
										<div class="progress-bar" style="width:25%;"></div>
									</div>
								</div>

							</div>
						</div>	
					</div>
					<!--좌측 그래프 끝-->

					<!--우측 데이터 시작-->
					<div class="w88p">
						<div id="dashboard-grid" class="grid-stack">
							<div class="grid-stack-item" gs-w="3" gs-h="2" gs-x="0" gs-y="0">
								<div class="grid-stack-item-content bg-content active dashbox">
									<div class="dash-title">사용자 접속 현황</div>
									<div class="dash-table-box">
										<table class="demotable ml10 mr10">
											<tr>
												<td rowspan="2" class="demofont" style="width:60%">1,983</td>
												<td class="fc-gray" style="width:18%">내부접속</td>
												<td class="right pr10"  style="width:18%">1,943</td>
											</tr>
											<tr>
												<td class="fc-gray">외부접속</td>
												<td class="right pr10">45</td>
											</tr>
										</table>
									</div>
									<div class="accordion">
										<div class="front">
											<div class="dash-graph-box">
												<canvas id="iamTrafficChart"></canvas>
											</div>
										</div>
										<div class="back">
											<table class="table">
												<thead>
													<tr>
														<th>IP</th>
														<th>User</th>
														<th> 접속 시간</th>
														<th>접속 결과</th>
													</tr>
												</thead>
												<tr>
													<td>212.222.333.123</td>
													<td>박영재</td>
													<td>2025-10-17 10:00:00</td>
													<td class="center"><i class="fa-solid fa-circle-check fc-green"></i></td>
												</tr>
												<tr>
													<td>212.222.333.123</td>
													<td>김영아</td>
													<td>2025-10-17 10:00:00</td>
													<td class="center"><i class="fa-solid fa-circle-xmark fc-red"></i></td>
												</tr>
												<tr>
													<td>212.222.333.123</td>
													<td>김혜인</td>
													<td>2025-10-17 10:00:00</td>
													<td class="center"><i class="fa-solid fa-circle-xmark fc-red"></i></td>
												</tr>
												<tr>
													<td>212.222.333.123</td>
													<td>김정은</td>
													<td>2025-10-17 10:00:00</td>
													<td class="center"><i class="fa-solid fa-circle-xmark fc-green"></i></td>
												</tr>
												<tr>
													<td>212.222.333.123</td>
													<td>이관재</td>
													<td>2025-10-17 10:00:00</td>
													<td class="center"><i class="fa-solid fa-circle-xmark fc-red"></i></td>
												</tr>
											</table>
										</div>
									</div>
									<div class="dash-stitle">
										<p>일반적인 접속량</p>
										<p>시스템이 안정적으로 동작하고 있습니다.</p>
									</div>
								</div>
							</div>

							<div class="grid-stack-item" gs-w="3" gs-h="2" gs-x="3" gs-y="0">
								<div class="grid-stack-item-content bg-content active dashbox">
									<div class="dash-title">유해물 차단 현황</div>
									<div class="dash-table-box">
										<table class="demotable ml10 mr10">
											<tr>
												<td rowspan="2" class="demofont" style="width:60%">12</td>
												<td class="fc-gray" style="width:18%">웹 차단</td>
												<td class="right pr10"  style="width:18%">12</td>
											</tr>
											<tr>
												<td class="fc-gray">앱 차단</td>
												<td class="right pr10">0</td>
											</tr>
										</table>
									</div>
									<div class="accordion">
										<div class="front">
											<div class="dash-graph-box">
												<canvas id="harmfulBlockChart"></canvas>
											</div>
										</div>
										<div class="back">
											<table class="table mt-2">
												<thead>
													<tr>
														<th>차단 시간</th>
														<th>차단 유형</th>
														<th>차단 건수</th>
														<th>상태</th>
													</tr>
												</thead>
												<tr>
													<td>2025-10-17 10:00:00</td>
													<td>웹 차단</td>
													<td>12</td>
													<td class="center"><i class="fa-solid fa-circle-check fc-green"></i></td>
												</tr>
												<tr>
													<td>2025-10-17 09:30:00</td>
													<td>앱 차단</td>
													<td>0</td>
													<td class="center"><i class="fa-solid fa-circle-check fc-green"></i></td>
												</tr>
											</table>
										</div>
									</div>
									<div class="dash-stitle">
										<p>유해물 차단 동작 중</p>
										<p>유해물 차단 건수가 일반적인 수치입니다.</p>
									</div>
								</div>
							</div>

							<div class="grid-stack-item" gs-w="3" gs-h="2" gs-x="6" gs-y="0">
								<div class="grid-stack-item-content bg-content active dashbox error">
									<div class="dash-title">사용자 접속 차단 현황 <span class="error">확인필요</span></div>
									<div class="dash-table-box">
										<table class="demotable ml10 mr10">
											<tr>
												<td rowspan="2" class="demofont" style="width:60%">1,121</td>
												<td class="fc-gray" style="width:18%">내부접속차단</td>
												<td class="right pr10"  style="width:18%">0</td>
											</tr>
											<tr>
												<td class="fc-gray">외부접속차단</td>
												<td class="right pr10">1,121</td>
											</tr>
										</table>
									</div>
									<div class="accordion">
										<div class="front">
											<div class="dash-graph-box">
												<canvas id="ztnaTrafficChart"></canvas>
											</div>
										</div>
										<div class="back">
											<table class="table mt-2">
												<thead>
													<tr>
														<th>차단 시간</th>
														<th>접속 IP</th>
														<th>차단 사유</th>
														<th>상태</th>
													</tr>
												</thead>
												<tr>
													<td>2025-10-17 10:00:00</td>
													<td>192.168.1.100</td>
													<td>권한 없음</td>
													<td class="center"><i class="fa-solid fa-circle-xmark fc-red"></i></td>
												</tr>
												<tr>
													<td>2025-10-17 09:45:00</td>
													<td>10.0.0.50</td>
													<td>정책 위반</td>
													<td class="center"><i class="fa-solid fa-circle-xmark fc-red"></i></td>
												</tr>
											</table>
										</div>
									</div>
									<div class="dash-stitle">
										<p class="fc-red fw700">차단 건수 급증</p>
										<p>외부 접속 차단이 급증하고 있습니다. 확인이 필요합니다.</p>
									</div>
								</div>
							</div>

							<div class="grid-stack-item" gs-w="3" gs-h="2" gs-x="9" gs-y="0">
								<div class="grid-stack-item-content bg-content active dashbox">
									<div class="dash-title">정보 유출 감시 현황</div>
									<div class="dash-table-box mr10">
										<table class="demotable ml10 mr10">
											<tr>
												<td rowspan="2" class="demofont" style="width:60%">47</td>
												<td class="fc-gray" style="width:20%">개인정보</td>
												<td class="right"  style="width:20%">13</td>
											</tr>
											<tr>
												<td class="fc-gray">키워드</td>
												<td class="right">34</td>
											</tr>
										</table>
									</div>
									<div class="accordion">
										<div class="front">
											<div class="dash-graph-box">
												<canvas id="casbBlockChart"></canvas>
											</div>
										</div>
										<div class="back">
											<table class="table mt-2">
												<thead>
													<tr>
														<th>감시 시간</th>
														<th>감시 유형</th>
														<th>감시 건수</th>
														<th>상태</th>
													</tr>
												</thead>
												<tr>
													<td>2025-10-17 10:00:00</td>
													<td>개인정보</td>
													<td>13</td>
													<td class="center"><i class="fa-solid fa-circle-check fc-green"></i></td>
												</tr>
												<tr>
													<td>2025-10-17 09:30:00</td>
													<td>키워드</td>
													<td>34</td>
													<td class="center"><i class="fa-solid fa-circle-check fc-green"></i></td>
												</tr>
											</table>
										</div>
									</div>
									<div class="dash-stitle">
										<p>정보 유출 감시 중</p>
										<p>개인정보, 키워드 검출 건수가 정상적 수치입니다.</p>
									</div>
								</div>
							</div>
							
							<div class="grid-stack-item" gs-w="3" gs-h="2" gs-x="0" gs-y="2">
								<div class="grid-stack-item-content bg-content active dashbox">		
									<div class="dash-title">SWG 시스템 현황</div>
									<div class="dash-table-box">
										<table class="demotable ml10 mr10">
											<tr>
												<td rowspan="3" class="demofont" style="width:60%">1,983</td>
												<td class="fc-gray" style="width:18%">전체</td>
												<td class="right pr10"  style="width:18%">1,983</td>
											</tr>
											<tr>
												<td class="fc-gray">웹</td>
												<td class="right pr10">1,543</td>
											</tr>
											<tr>
												<td class="fc-gray">앱</td>
												<td class="right pr10">440</td>
											</tr>
										</table>
									</div>
									<div class="accordion">
										<div class="front">
											<div class="dash-graph-box">
												<canvas id="harmfulBlockSystemChart"></canvas>
											</div>
										</div>
										<div class="back">
											<table class="table mt-2">
												<thead>
													<tr>
														<th>시스템</th>
														<th>트래픽</th>
														<th>상태</th>
														<th>마지막 업데이트</th>
													</tr>
												</thead>
												<tr>
													<td>웹 시스템</td>
													<td>1,543</td>
													<td class="center"><i class="fa-solid fa-circle-check fc-green"></i></td>
													<td>2025-10-17 10:00:00</td>
												</tr>
												<tr>
													<td>앱 시스템</td>
													<td>440</td>
													<td class="center"><i class="fa-solid fa-circle-check fc-green"></i></td>
													<td>2025-10-17 10:00:00</td>
												</tr>
											</table>
										</div>
									</div>
									<div class="dash-stitle">
										<p>일반적인 트래픽</p>
										<p>유해물 차단 시스템이 안정적으로 동작하고 있습니다.</p>
									</div>
								</div>
							</div>
							
							<div class="grid-stack-item" gs-w="3" gs-h="2" gs-x="3" gs-y="2">
								<div class="grid-stack-item-content bg-content active dashbox error">
									<div class="dash-title">어플리케이션 접속 현황 <span class="error">확인필요</span></div>
									<div class="dash-table-box">
										<table class="demotable ml10 mr10">
											<tr>
												<td rowspan="3" class="demofont" style="width:60%">890</td>
												<td class="fc-gray" style="width:18%">FTP</td>
												<td class="right pr10"  style="width:18%">246</td>
											</tr>
											<tr>
												<td class="fc-gray">메일</td>
												<td class="right pr10">179</td>
											</tr>
											<tr>
												<td class="fc-gray">웹하드</td>
												<td class="right pr10">90</td>
											</tr>
										</table>
									</div>
									<div class="accordion">
										<div class="front">
											<div class="dash-graph-box">
												<canvas id="aiTotalUsageChart"></canvas>
											</div>
										</div>
										<div class="back">
											<table class="table mt-2">
												<thead>
													<tr>
														<th>서비스</th>
														<th>접속량</th>
														<th>상태</th>
														<th>마지막 접속</th>
													</tr>
												</thead>
												<tr>
													<td>FTP</td>
													<td>246</td>
													<td class="center"><i class="fa-solid fa-circle-exclamation fc-red"></i></td>
													<td>2025-10-17 10:00:00</td>
												</tr>
												<tr>
													<td>메일</td>
													<td>179</td>
													<td class="center"><i class="fa-solid fa-circle-check fc-green"></i></td>
													<td>2025-10-17 09:45:00</td>
												</tr>
												<tr>
													<td>웹하드</td>
													<td>90</td>
													<td class="center"><i class="fa-solid fa-circle-check fc-green"></i></td>
													<td>2025-10-17 09:30:00</td>
												</tr>
											</table>
										</div>
									</div>
									<div class="dash-stitle">
										<p class="fc-red fw700">FTP 접속량 급증</p>
										<p>FTP 접속량이 급증하였습니다. 내부 이용자 확인이 필요합니다.</p>
									</div>
								</div>
							</div>	

							<div class="grid-stack-item" gs-w="3" gs-h="2" gs-x="6" gs-y="2">
								<div class="grid-stack-item-content bg-content active dashbox">
									<div class="dash-title">DLP 시스템 현황</div>
									<div class="dash-table-box">
										<table class="demotable ml10 mr10">
											<tr>
												<td rowspan="3" class="demofont" style="width:60%">1,983</td>
												<td class="fc-gray" style="width:18%">전체</td>
												<td class="right pr10"  style="width:18%">1,943</td>
											</tr>
											<tr>
												<td class="fc-gray">감시</td>
												<td class="right pr10">1,943</td>
											</tr>
											<tr>
												<td class="fc-gray">차단</td>
												<td class="right pr10">0</td>
											</tr>
										</table>
									</div>
									<div class="accordion">
										<div class="front">
											<div class="dash-graph-box">
												<canvas id="ztnaBlockChart"></canvas>
											</div>
										</div>
										<div class="back">
											<table class="table mt-2">
												<thead>
													<tr>
														<th>시스템</th>
														<th>감시 건수</th>
														<th>차단 건수</th>
														<th>상태</th>
													</tr>
												</thead>
												<tr>
													<td>전체</td>
													<td>1,943</td>
													<td>0</td>
													<td class="center"><i class="fa-solid fa-circle-check fc-green"></i></td>
												</tr>
												<tr>
													<td>감시</td>
													<td>1,943</td>
													<td>0</td>
													<td class="center"><i class="fa-solid fa-circle-check fc-green"></i></td>
												</tr>
											</table>
										</div>
									</div>
									<div class="dash-stitle">
										<p>정보보호 동작 중</p>
										<p>이용 건수가 일반적인 수치입니다. </p>
									</div>
								</div>
							</div>	

							<div class="grid-stack-item" gs-w="3" gs-h="2" gs-x="9" gs-y="2">
								<div class="grid-stack-item-content bg-content active dashbox">
									<div class="dash-title">AI 키워드 분석 </div>
									<div class="accordion">
										<div class="front">
											<div class="wordcloud-container mt-2">
												<canvas id="wordCloud" style="width: 100%; height: 100%; display: block; max-width: 100%; max-height: 100%;"></canvas>
											</div>
										</div>
										<div class="back">
											<table class="table mt-2">
												<thead>
													<tr>
														<th>키워드</th>
														<th>빈도</th>
														<th>위험도</th>
														<th>상태</th>
													</tr>
												</thead>
												<tr>
													<td>주식추천</td>
													<td>45</td>
													<td>높음</td>
													<td class="center"><i class="fa-solid fa-circle-exclamation fc-red"></i></td>
												</tr>
												<tr>
													<td>AI추천주</td>
													<td>35</td>
													<td>높음</td>
													<td class="center"><i class="fa-solid fa-circle-exclamation fc-red"></i></td>
												</tr>
												<tr>
													<td>보고서</td>
													<td>50</td>
													<td>낮음</td>
													<td class="center"><i class="fa-solid fa-circle-check fc-green"></i></td>
												</tr>
											</table>
										</div>
									</div>
									<div class="dash-stitle">
										<p>주식관련 키워드 급증</p>
										<p>주식추천, AI추천주 등 주식관련 키워드가 급증하고 있습니다.</p>
									</div>
								</div>
							</div>			
						</div>
					</div>
					<!--우측 데이터 끝-->
				</div>

			</div>
			<!-- body 끝 -->
			<!--풋터 시작-->
			<div class="footer">
			ⓒ SOOSAN INT Co.,Ltd. eWalker SWG V10 10.0.1.23011201-2213715 <span class="fc-main"> DEMO-LICENSE 42 days left.</span>
			</div>
			<!--풋터 끝-->
		</div>
		
		<script>
			// GridStack 초기화
			let grid;
			
			// 전체 dashbox 접기/펴기 기능
			let allDashboxCollapsed = false;
			
			document.addEventListener('DOMContentLoaded', function() {
				// 먼저 accordion 기능 초기화
				initializeAccordionFeatures();
				
				// front/back 토글 기능 초기화
				initializeFrontBackToggle();
				
			// GridStack 초기화
			if (typeof GridStack !== 'undefined') {
				grid = GridStack.init({
					column: 12,
					cellHeight: 200,
					margin: 15,
					removable: false,
					acceptWidgets: false,
					draggable: {
						handle: '.dashbox',
						scroll: true
					},
					resizable: false,
					disableResize: true,
					disableOneColumnMode: true
				});
					
					console.log('GridStack initialized successfully');
					
					// 모든 그리드 아이템에 대해 크기 조절 비활성화
					grid.on('added', function(event, items) {
						items.forEach(function(item) {
							if (item.el) {
								// jQuery UI resizable 비활성화
								if (item.el.resizable) {
									item.el.resizable('disable');
								}
								// 크기 조절 핸들 제거
								item.el.find('.ui-resizable-handle').remove();
								
								// accordion 기능 보호
								protectAccordionInItem(item.el[0]);
							}
						});
					});
					
					// 기존 아이템들에 대해서도 크기 조절 비활성화
					grid.engine.nodes.forEach(function(node) {
						if (node.el) {
							if (node.el.resizable) {
								node.el.resizable('disable');
							}
							node.el.find('.ui-resizable-handle').remove();
							
							// accordion 기능 보호
							protectAccordionInItem(node.el[0]);
						}
					});
				} else {
					console.error('GridStack library not loaded');
				}
			});
			
			// accordion 기능 초기화 함수
			function initializeAccordionFeatures() {
				// 전체 접기/펴기 버튼 이벤트
				const toggleAllBtn = document.getElementById('toggleAllDashbox');
				if (toggleAllBtn) {
					toggleAllBtn.addEventListener('click', function() {
						// 모든 dashbox 찾기
						const allDashboxes = document.querySelectorAll('.dashbox');
						allDashboxes.forEach(function(dashbox) {
							const accordion = dashbox.querySelector('.accordion');
							if (accordion) {
								// 왼쪽 시스템 현황 박스인지 확인 (chart-bar 클래스가 있는지 확인)
								const isLeftSystemBox = dashbox.closest('.chart-bar') !== null;
								
								if (allDashboxCollapsed) {
									// 현재 모두 접혀있으면 펴기
									accordion.classList.remove('collapsed');
									dashbox.classList.remove('collapsed');
									dashbox.style.minHeight = '';
									dashbox.style.height = '';
									
									// GridStack 아이템 높이도 업데이트
									const gridItem = dashbox.closest('.grid-stack-item');
									if (gridItem && grid) {
										grid.update(gridItem, {h: 2});
										gridItem.classList.remove('collapsed-height-1');
										
										// 높이 강제 설정 제거
										setTimeout(function() {
											if (gridItem) {
												gridItem.style.height = '';
												const content = gridItem.querySelector('.grid-stack-item-content');
												if (content) {
													content.style.height = '';
												}
											}
										}, 50);
									}
								} else {
								// 현재 펼쳐져 있으면 접기
								accordion.classList.add('collapsed');
								dashbox.classList.add('collapsed');
								
								// 왼쪽 시스템 현황 박스는 120px, 오른쪽 박스는 185px로 설정
								if (isLeftSystemBox) {
									dashbox.style.minHeight = '120px';
									dashbox.style.height = '120px';
								} else {
									dashbox.style.minHeight = '185px';
									dashbox.style.height = '185px';
								}
								
								// GridStack 아이템 높이도 업데이트
									const gridItem = dashbox.closest('.grid-stack-item');
									if (gridItem && grid) {
										grid.update(gridItem, {h: 1});
										gridItem.classList.add('collapsed-height-1');
										
										// 185px로 강제 설정
										setTimeout(function() {
											if (gridItem) {
												gridItem.style.height = '185px';
												const content = gridItem.querySelector('.grid-stack-item-content');
												if (content) {
													content.style.height = '185px';
												}
											}
										}, 50);
									}
								}
							}
						});
						// 상태 반전
						allDashboxCollapsed = !allDashboxCollapsed;
					});
				}
				
				// 모든 dashbox에 대해 이벤트 리스너 추가
				document.querySelectorAll('.dashbox').forEach(function(dashbox) {
					addAccordionToDashbox(dashbox);
				});
			}
			
			// 개별 dashbox에 accordion 기능 추가
			function addAccordionToDashbox(dashbox) {
				// dashbox 내부에 accordion이 있는지 확인
				const accordion = dashbox.querySelector('.accordion');
				if (accordion) {
					// 기존 아이콘이 있는지 확인하고 제거
					const existingIcon = dashbox.querySelector('.accordion-toggle-icon');
					if (existingIcon) {
						existingIcon.remove();
					}
					
					// 우측 상단 아이콘 영역에 별도 클릭 이벤트 추가
					const iconArea = document.createElement('div');
					iconArea.className = 'accordion-toggle-icon';
					iconArea.style.cssText = 'position: absolute; top: 10px; right: 10px; width: 20px; height: 20px; cursor: pointer; z-index: 1000; pointer-events: auto;';
					iconArea.innerHTML = '<i class="fa-solid fa-chevron-up" style="color: rgba(255,255,255,0.3);"></i>';
					
					// 아이콘 클릭 이벤트
					iconArea.addEventListener('click', function(e) {
						e.preventDefault();
						e.stopPropagation();
						e.stopImmediatePropagation();
						
						accordion.classList.toggle('collapsed');
						dashbox.classList.toggle('collapsed');
						
						// 왼쪽 시스템 현황 박스인지 확인 (chart-bar 클래스가 있는지 확인)
						const isLeftSystemBox = dashbox.closest('.chart-bar') !== null;
						
						// 높이 직접 설정으로 확실한 변화 보장
						if (accordion.classList.contains('collapsed')) {
							// 왼쪽 시스템 현황 박스는 120px, 오른쪽 박스는 185px로 설정
							if (isLeftSystemBox) {
								dashbox.style.minHeight = '120px';
								dashbox.style.height = '120px';
							} else {
								dashbox.style.minHeight = '185px';
								dashbox.style.height = '185px';
							}
						} else {
							dashbox.style.minHeight = '';
							dashbox.style.height = '';
						}
						
							// GridStack 아이템 높이도 업데이트
							const gridItem = dashbox.closest('.grid-stack-item');
							if (gridItem && grid) {
								if (accordion.classList.contains('collapsed')) {
									// 접힌 상태: 높이를 1로 설정하고 CSS 클래스 추가
									grid.update(gridItem, {h: 1});
									gridItem.classList.add('collapsed-height-1');
									
									// 185px로 강제 설정
									setTimeout(function() {
										if (gridItem) {
											gridItem.style.height = '185px';
											const content = gridItem.querySelector('.grid-stack-item-content');
											if (content) {
												content.style.height = '185px';
											}
										}
									}, 50);
							} else {
								// 펼친 상태: 원래 높이로 복원
								grid.update(gridItem, {h: 2});
								gridItem.classList.remove('collapsed-height-1');
								
								// 높이 강제 설정 제거
								setTimeout(function() {
									if (gridItem) {
										gridItem.style.height = '';
										const content = gridItem.querySelector('.grid-stack-item-content');
										if (content) {
											content.style.height = '';
										}
									}
								}, 50);
							}
						}
						
						// 아이콘 방향 변경
						const icon = iconArea.querySelector('i');
						if (accordion.classList.contains('collapsed')) {
							icon.className = 'fa-solid fa-chevron-down';
						} else {
							icon.className = 'fa-solid fa-chevron-up';
						}
					});
					
					// 마우스 이벤트도 방지
					iconArea.addEventListener('mousedown', function(e) {
						e.preventDefault();
						e.stopPropagation();
						e.stopImmediatePropagation();
					});
					
					dashbox.style.position = 'relative';
					dashbox.appendChild(iconArea);
				}
			}
			
			// GridStack 아이템에서 accordion 기능 보호
			function protectAccordionInItem(element) {
				if (element && element.querySelector) {
					const dashbox = element.querySelector('.dashbox');
					if (dashbox) {
						addAccordionToDashbox(dashbox);
					}
				}
			}

			// front/back 화면 전환 함수
			function toggleFrontBack(element) {
				const frontElement = element.querySelector('.front');
				const backElement = element.querySelector('.back');
				
				if (!frontElement || !backElement) return;
				
				// 현재 상태 확인 (back이 보이는지 확인)
				const isBackVisible = backElement.classList.contains('show') && 
									  backElement.style.visibility !== 'hidden' && 
									  backElement.style.opacity !== '0';
				
				if (isBackVisible) {
					// back에서 front로 전환
					backElement.classList.remove('show');
					backElement.style.visibility = 'hidden';
					backElement.style.opacity = '0';
					backElement.style.pointerEvents = 'none';
					
					frontElement.style.visibility = 'visible';
					frontElement.style.opacity = '1';
					frontElement.style.pointerEvents = 'auto';
					frontElement.classList.remove('hide');
					frontElement.style.position = 'relative';
					frontElement.style.transform = 'translateY(0)';
				} else {
					// front에서 back으로 전환
					frontElement.classList.add('hide');
					frontElement.style.position = 'absolute';
					frontElement.style.top = '0';
					frontElement.style.left = '0';
					frontElement.style.width = '100%';
					frontElement.style.height = '100%';
					frontElement.style.visibility = 'hidden';
					frontElement.style.opacity = '0';
					frontElement.style.pointerEvents = 'none';
					frontElement.style.transform = 'translateY(-10px)';
					
					backElement.style.position = 'absolute';
					backElement.style.top = '0';
					backElement.style.left = '0';
					backElement.style.width = '100%';
					backElement.style.height = '100%';
					backElement.style.visibility = 'visible';
					backElement.style.pointerEvents = 'auto';
					backElement.style.transform = 'translateY(0)';
					
					setTimeout(() => {
						backElement.classList.add('show');
						backElement.style.opacity = '1';
					}, 10);
				}
			}
			
			// 모든 front/back 요소에 클릭 이벤트 추가
			function initializeFrontBackToggle() {
				document.querySelectorAll('.front, .back').forEach(function(element) {
					element.addEventListener('click', function(e) {
						e.preventDefault();
						e.stopPropagation();
						
						// 부모 accordion 요소 찾기
						const accordion = element.closest('.accordion');
						if (accordion) {
							console.log('Toggling front/back for accordion:', accordion);
							toggleFrontBack(accordion);
						}
					});
				});
				
				// 디버깅을 위한 로그 추가
				console.log('Front/back toggle initialized for', document.querySelectorAll('.front, .back').length, 'elements');
			}

			// Netdata API 설정
			const NETDATA_URL = 'http://localhost:19999';
			let cpuChart = null;
			let memChart = null;
			let hddChart = null;
			
			// Netdata 연결 테스트 함수
			async function testNetdataConnection() {
				try {
					const response = await fetch(`${NETDATA_URL}/api/v1/info`, {
						method: 'GET',
						headers: {
							'Accept': 'application/json'
						}
					});
					if (response.ok) {
						const info = await response.json();
						console.log('✓ Netdata connection successful:', info);
						return true;
					} else {
						console.error('✗ Netdata connection failed:', response.status, response.statusText);
						return false;
					}
				} catch (error) {
					console.error('✗ Failed to connect to Netdata:', error.message);
					console.error('  Make sure Netdata is running at', NETDATA_URL);
					return false;
				}
			}
			
			// Netdata 연결 상태 표시 함수
			function showNetdataError(message) {
				// CPU, Memory, HDD 박스에 오류 메시지 표시
				const systemBoxes = document.querySelectorAll('#chart-body .dashbox');
				systemBoxes.forEach(box => {
					const chartData = box.querySelector('.chart-data p');
					if (chartData) {
						chartData.innerHTML = `<span class="fw400" style="color:var(--c-red); font-size:0.9em;">${message}</span>`;
					}
				});
			}
			
			function clearNetdataError() {
				// 오류 메시지 제거 (데이터가 정상적으로 로드되면)
			}
			
			// Netdata API 호출 함수
			async function fetchNetdataData(chart, points = 60) {
				try {
					const url = `${NETDATA_URL}/api/v1/data?chart=${chart}&format=json&points=${points}&options=seconds`;
					const response = await fetch(url, {
						method: 'GET',
						headers: {
							'Accept': 'application/json'
						}
					});
					if (!response.ok) {
						if (response.status === 404) {
							console.warn(`Chart ${chart} not found in Netdata (404)`);
						} else {
							console.error(`HTTP error! status: ${response.status} for chart ${chart}`);
						}
						return null;
					}
					const data = await response.json();
					console.log(`✓ Successfully fetched ${chart}:`, {
						hasData: !!data.data,
						dataKeys: data.data ? Object.keys(data.data) : [],
						labelsCount: data.labels ? data.labels.length : 0
					});
					return data;
				} catch (error) {
					if (error.name === 'TypeError' && error.message.includes('fetch')) {
						const errorMsg = error.message.includes('Failed to fetch') || error.message.includes('ERR_CONNECTION_REFUSED') 
							? 'Netdata 연결 실패 - Netdata가 실행 중인지 확인하세요' 
							: `Netdata 연결 오류: ${error.message}`;
						console.error(`✗ Failed to connect to Netdata at ${NETDATA_URL}`);
						console.error('  Error details:', error.message);
						showNetdataError(errorMsg);
					} else {
						console.error(`✗ Error fetching Netdata ${chart}:`, error);
					}
					return null;
				}
			}
			
			// CPU 데이터 가져오기 및 파싱
			async function fetchCPUData() {
				// system.cpu 차트 시도
				let data = await fetchNetdataData('system.cpu', 60);
				
				// system.cpu가 없으면 다른 차트 이름들 시도
				if (!data || !data.data) {
					console.log('system.cpu not found, trying alternative chart names...');
					const alternativeCharts = ['cpu', 'system.cpu.total', 'system.cpu.utilization'];
					for (const chartName of alternativeCharts) {
						data = await fetchNetdataData(chartName, 60);
						if (data && data.data) {
							console.log(`✓ Found CPU data in chart: ${chartName}`);
							break;
						}
					}
				}
				
				if (!data || !data.data) {
					console.warn('✗ CPU chart not found in Netdata. Tried: system.cpu, cpu, system.cpu.total, system.cpu.utilization');
					// 사용 가능한 차트 목록 확인
					try {
						const chartsResponse = await fetch(`${NETDATA_URL}/api/v1/charts`);
						const chartsData = await chartsResponse.json();
						const cpuCharts = Object.keys(chartsData.charts).filter(id => 
							id.toLowerCase().includes('cpu')
						);
						console.log('Available CPU-related charts:', cpuCharts.slice(0, 10));
					} catch (e) {
						console.error('Could not fetch charts list:', e);
					}
					return null;
				}
				
				const cpuData = data.data;
				const timestamps = data.labels || [];
				const cpuUsage = [];
				
				console.log('CPU data keys:', Object.keys(cpuData));
				console.log('Timestamps count:', timestamps.length);
				
				// Netdata의 system.cpu는 누적 값이므로 이전 값과의 차이를 계산해야 함
				let prevUser = 0, prevNice = 0, prevSystem = 0, prevIdle = 0, prevIowait = 0, prevIrq = 0, prevSoftirq = 0;
				
				for (let i = 0; i < timestamps.length; i++) {
					let user = 0, nice = 0, system = 0, idle = 0, iowait = 0, irq = 0, softirq = 0;
					
					// 각 CPU 상태별 데이터 수집 (모든 CPU 코어 합산)
					Object.keys(cpuData).forEach(key => {
						const value = cpuData[key][i];
						if (value === null || value === undefined) return;
						
						// 키 이름에 따라 분류
						if (key.toLowerCase().includes('user') && !key.toLowerCase().includes('nice')) {
							user += value;
						} else if (key.toLowerCase().includes('nice')) {
							nice += value;
						} else if (key.toLowerCase().includes('system')) {
							system += value;
						} else if (key.toLowerCase().includes('idle') && !key.toLowerCase().includes('iowait')) {
							idle += value;
						} else if (key.toLowerCase().includes('iowait')) {
							iowait += value;
						} else if (key.toLowerCase().includes('irq') && !key.toLowerCase().includes('softirq')) {
							irq += value;
						} else if (key.toLowerCase().includes('softirq')) {
							softirq += value;
						}
					});
					
					// 디버깅: 첫 번째와 마지막 데이터 포인트 로그
					if (i === 0 || i === timestamps.length - 1) {
						console.log(`CPU data at index ${i}:`, { user, nice, system, idle, iowait, irq, softirq });
					}
					
					// 첫 번째 데이터 포인트는 이전 값이 없으므로 스킵
					if (i === 0) {
						prevUser = user;
						prevNice = nice;
						prevSystem = system;
						prevIdle = idle;
						prevIowait = iowait;
						prevIrq = irq;
						prevSoftirq = softirq;
						continue;
					}
					
					// 이전 값과의 차이 계산 (delta)
					const deltaUser = user - prevUser;
					const deltaNice = nice - prevNice;
					const deltaSystem = system - prevSystem;
					const deltaIdle = idle - prevIdle;
					const deltaIowait = iowait - prevIowait;
					const deltaIrq = irq - prevIrq;
					const deltaSoftirq = softirq - prevSoftirq;
					
					// 전체 시간과 사용된 시간 계산
					const total = deltaUser + deltaNice + deltaSystem + deltaIdle + deltaIowait + deltaIrq + deltaSoftirq;
					const used = deltaUser + deltaNice + deltaSystem + deltaIrq + deltaSoftirq;
					
					// CPU 사용률 계산: (사용된 시간 / 전체 시간) * 100
					const usage = total > 0 ? Math.min(100, Math.max(0, (used / total) * 100)) : 0;
					
					// 디버깅: 계산 결과 확인
					if (i === 1 || i === timestamps.length - 1) {
						console.log(`CPU usage calculation at index ${i}:`, {
							total, used, usage: usage.toFixed(2) + '%'
						});
					}
					
					cpuUsage.push(usage);
					
					// 현재 값을 이전 값으로 저장
					prevUser = user;
					prevNice = nice;
					prevSystem = system;
					prevIdle = idle;
					prevIowait = iowait;
					prevIrq = irq;
					prevSoftirq = softirq;
				}
				
				// 첫 번째 데이터 포인트가 스킵되었으므로, 두 번째 값으로 채움
				if (cpuUsage.length > 0 && cpuUsage.length < timestamps.length) {
					cpuUsage.unshift(cpuUsage[0]);
				}
				
				console.log(`CPU usage array length: ${cpuUsage.length}, values:`, cpuUsage.slice(0, 5), '...', cpuUsage.slice(-5));
				
				// 마지막 시점의 원시값 가져오기 (최신 누적값)
				let rawUser = 0, rawNice = 0, rawSystem = 0, rawIdle = 0, rawIowait = 0, rawIrq = 0, rawSoftirq = 0;
				if (timestamps.length > 0) {
					const lastIndex = timestamps.length - 1;
					Object.keys(cpuData).forEach(key => {
						const value = cpuData[key][lastIndex];
						if (value === null || value === undefined) return;
						
						if (key.toLowerCase().includes('user') && !key.toLowerCase().includes('nice')) {
							rawUser += value;
						} else if (key.toLowerCase().includes('nice')) {
							rawNice += value;
						} else if (key.toLowerCase().includes('system')) {
							rawSystem += value;
						} else if (key.toLowerCase().includes('idle') && !key.toLowerCase().includes('iowait')) {
							rawIdle += value;
						} else if (key.toLowerCase().includes('iowait')) {
							rawIowait += value;
						} else if (key.toLowerCase().includes('irq') && !key.toLowerCase().includes('softirq')) {
							rawIrq += value;
						} else if (key.toLowerCase().includes('softirq')) {
							rawSoftirq += value;
						}
					});
				}
				
				return {
					values: cpuUsage,
					current: cpuUsage.length > 0 ? cpuUsage[cpuUsage.length - 1] : 0,
					raw: {
						user: rawUser,
						nice: rawNice,
						system: rawSystem,
						idle: rawIdle,
						iowait: rawIowait,
						irq: rawIrq,
						softirq: rawSoftirq
					}
				};
			}
			
			// Memory 데이터 가져오기 및 파싱
			async function fetchMemoryData() {
				const data = await fetchNetdataData('system.ram');
				if (!data || !data.data) return null;
				
				const memData = data.data;
				const timestamps = data.labels || [];
				const memUsage = [];
				let totalMem = 0;
				let usedMem = 0;
				
				for (let i = 0; i < timestamps.length; i++) {
					const used = memData.used ? memData.used[i] : 0;
					const cached = memData.cached ? memData.cached[i] : 0;
					const buffers = memData.buffers ? memData.buffers[i] : 0;
					const free = memData.free ? memData.free[i] : 0;
					
					const total = used + cached + buffers + free;
					const usage = total > 0 ? ((used / total) * 100) : 0;
					
					memUsage.push(usage);
					
					if (i === timestamps.length - 1) {
						totalMem = total;
						usedMem = used;
					}
				}
				
				return {
					values: memUsage,
					current: memUsage[memUsage.length - 1] || 0,
					used: usedMem,
					total: totalMem
				};
			}
			
			// HDD 데이터 가져오기 및 파싱
			async function fetchHDDData() {
				// 먼저 사용 가능한 디스크 차트 찾기
				try {
					const chartsResponse = await fetch(`${NETDATA_URL}/api/v1/charts`);
					const chartsData = await chartsResponse.json();
					
					// disk_space 또는 disk.space 차트 찾기
					let diskChart = null;
					for (const chartId in chartsData.charts) {
						if (chartId.startsWith('disk_space.') || chartId.startsWith('disk.space.')) {
							diskChart = chartId;
							break;
						}
					}
					
					if (!diskChart) {
						console.warn('No disk space chart found');
						return null;
					}
					
					const data = await fetchNetdataData(diskChart);
					if (!data || !data.data) return null;
					
					const diskData = data.data;
					const timestamps = data.labels || [];
					const diskUsage = [];
					let totalDisk = 0;
					let usedDisk = 0;
					
					for (let i = 0; i < timestamps.length; i++) {
						const used = diskData.used ? diskData.used[i] : 0;
						const avail = diskData.avail ? diskData.avail[i] : 0;
						const total = used + avail;
						
						const usage = total > 0 ? ((used / total) * 100) : 0;
						diskUsage.push(usage);
						
						if (i === timestamps.length - 1) {
							totalDisk = total;
							usedDisk = used;
						}
					}
					
					return {
						values: diskUsage,
						current: diskUsage[diskUsage.length - 1] || 0,
						used: usedDisk,
						total: totalDisk
					};
				} catch (error) {
					console.error('Error fetching HDD data:', error);
					return null;
				}
			}
			
			// 차트 업데이트 함수
			function updateChart(chart, newData, labels) {
				if (!chart || !newData || newData.length === 0) return;
				
				// 최근 12개 데이터만 사용 (또는 labels 길이만큼)
				const dataLength = Math.min(newData.length, labels.length);
				const recentData = newData.slice(-dataLength);
				const recentLabels = labels.slice(-dataLength);
				
				chart.data.labels = recentLabels;
				chart.data.datasets[0].data = recentData;
				chart.update('none'); // 애니메이션 없이 업데이트
			}
			
			// 시스템 리소스 업데이트 함수
			async function updateSystemResources() {
				let hasData = false;
				
				// CPU 업데이트
				try {
					const cpuData = await fetchCPUData();
					if (cpuData && cpuData.values && cpuData.values.length > 0 && cpuChart) {
						hasData = true;
						// 그래프 데이터 업데이트
						const labels = Array.from({length: cpuData.values.length}, (_, i) => {
							const date = new Date();
							date.setMinutes(date.getMinutes() - (cpuData.values.length - i));
							return date.getHours().toString().padStart(2, '0') + ':' + date.getMinutes().toString().padStart(2, '0');
						});
						updateChart(cpuChart, cpuData.values, labels);
						
						// CPU 퍼센트 수치 표시 업데이트
						const cpuChartElement = document.querySelector('#cpuChart');
						if (cpuChartElement) {
							const dashbox = cpuChartElement.closest('.dashbox');
							if (dashbox) {
								const cpuPercentElement = dashbox.querySelector('.chart-data p');
								if (cpuPercentElement) {
									const cpuValue = Math.round(cpuData.current * 10) / 10; // 소수점 첫째자리까지
									cpuPercentElement.innerHTML = `<span class="fw700">${cpuValue.toFixed(1)}</span><span class="fw400"> %</span>`;
								}
								
								// CPU 프로그레스 바 업데이트
								const cpuProgressBar = dashbox.querySelector('.progress-bar');
								if (cpuProgressBar) {
									const cpuPercent = Math.min(100, Math.max(0, cpuData.current));
									cpuProgressBar.style.width = `${cpuPercent}%`;
									// 80% 이상이면 error 클래스 추가
									if (cpuPercent > 80) {
										cpuProgressBar.classList.add('error');
									} else {
										cpuProgressBar.classList.remove('error');
									}
								}
							}
						}
					} else if (!cpuData) {
						console.warn('CPU data not available from Netdata');
					}
				} catch (error) {
					console.error('Error updating CPU data:', error);
				}
				
				// Memory 업데이트
				const memData = await fetchMemoryData();
				if (memData && memChart) {
					const labels = Array.from({length: memData.values.length}, (_, i) => {
						const date = new Date();
						date.setMinutes(date.getMinutes() - (memData.values.length - i));
						return date.getHours().toString().padStart(2, '0');
					});
					updateChart(memChart, memData.values, labels);
					
					// Memory 표시 업데이트
					const memPercentElement = document.querySelector('#memChart').closest('.dashbox').querySelector('.chart-data p');
					if (memPercentElement && memData.total > 0) {
						const usedGB = (memData.used / 1024 / 1024 / 1024).toFixed(2);
						const totalGB = (memData.total / 1024 / 1024 / 1024).toFixed(2);
						memPercentElement.innerHTML = `<span class="fw700">${usedGB}G</span> <span class="fw400">/ ${totalGB}G</span>`;
					}
					
					// Memory 프로그레스 바 업데이트
					const memProgressBar = document.querySelector('#memChart').closest('.dashbox').querySelector('.progress-bar');
					if (memProgressBar) {
						memProgressBar.style.width = `${memData.current}%`;
					}
				}
				
				// HDD 업데이트
				const hddData = await fetchHDDData();
				if (hddData && hddChart) {
					const labels = Array.from({length: hddData.values.length}, (_, i) => {
						const date = new Date();
						date.setMinutes(date.getMinutes() - (hddData.values.length - i));
						return date.getHours().toString().padStart(2, '0');
					});
					updateChart(hddChart, hddData.values, labels);
					
					// HDD 표시 업데이트
					const hddPercentElement = document.querySelector('#hddChart').closest('.dashbox').querySelector('.chart-data p');
					if (hddPercentElement && hddData.total > 0) {
						const usedGB = (hddData.used / 1024 / 1024 / 1024).toFixed(2);
						const totalGB = (hddData.total / 1024 / 1024 / 1024).toFixed(2);
						hddPercentElement.innerHTML = `<span class="fw700">${usedGB}G</span> <span class="fw400">/ ${totalGB}G</span>`;
					}
					
					// HDD 프로그레스 바 업데이트
					const hddProgressBar = document.querySelector('#hddChart').closest('.dashbox').querySelector('.progress-bar');
					if (hddProgressBar) {
						hddProgressBar.style.width = `${hddData.current}%`;
					}
				}
			}
			
			// 그래프 초기화 함수들
			document.addEventListener('DOMContentLoaded', function() {
				console.log('Dashboard Demo 2 - Initializing charts...');
				
				// Chart.js 라이브러리 로드 확인
				if (typeof Chart === 'undefined') {
					console.error('Chart.js library not loaded');
					return;
				}
				
				// 간단하고 안정적인 차트 초기화 함수
				const initAllCharts = () => {
					console.log('Starting chart initialization...');
					
					// 기본 선그래프 생성 함수
					const createBasicLineChart = (elementId, data, label, color = '#36a2eb', borderWidth = 2) => {
						const ctx = document.getElementById(elementId);
						if (!ctx) {
							console.warn(`Element ${elementId} not found`);
							return null;
						}
						
						// 색상에 투명도 추가
						const backgroundColor = color.includes('rgba') ? color : color + '33'; // 20% 투명도 추가
						
						try {
							return new Chart(ctx, {
								type: 'line',
								data: {
									labels: ['09', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20'],
									datasets: [{
										label: label,
										data: data,
										borderColor: color,
										backgroundColor: backgroundColor,
										borderWidth: borderWidth,
										tension: 0.4,
										fill: true,
										pointBackgroundColor: color,
										pointBorderColor: color,
										pointBorderWidth: 0,
										pointRadius: 2,
										pointHoverRadius: 4
									}]
								},
								options: {
									responsive: true,
									maintainAspectRatio: false,
									plugins: {
										legend: { display: false }
									},
									scales: {
										x: {
											display: true,
											grid: { color: 'rgba(160, 160, 160, 0.3)' },
											ticks: { color: '#ffffff', font: { size: 10 } }
										},
										y: {
											display: true,
											grid: { color: 'rgba(160, 160, 160, 0.3)' },
											ticks: { display: false }
										}
									}
								}
							});
						} catch (error) {
							console.error(`Error creating chart for ${elementId}:`, error);
							return null;
						}
					};
					
					// 기본 원형 그래프 생성 함수
					const createBasicDoughnutChart = (elementId, data, labels) => {
						const ctx = document.getElementById(elementId);
						if (!ctx) {
							console.warn(`Element ${elementId} not found`);
							return null;
						}
						
						try {
							return new Chart(ctx, {
								type: 'doughnut',
								data: {
									labels: labels,
									datasets: [{
										data: data,
										backgroundColor: [
											'rgba(54, 162, 235, 0.8)',
											'rgba(75, 192, 192, 0.8)',
											'rgba(153, 102, 255, 0.8)',
											'rgba(255, 99, 132, 0.8)',
											'rgba(255, 159, 64, 0.8)',
											'rgba(255, 205, 86, 0.8)',
											'rgba(201, 203, 207, 0.8)',
											'rgba(255, 99, 255, 0.8)'
										],
										borderColor: 'rgba(255, 255, 255, 0.1)',
										borderWidth: 2,
										hoverOffset: 4
									}]
								},
								options: {
									responsive: true,
									maintainAspectRatio: true,
									cutout: '70%',
									plugins: {
										legend: {
											display: true,
											position: 'bottom',
											labels: {
												color: '#ffffff',
												font: { size: 10 },
												usePointStyle: true,
												pointStyle: 'circle',
												boxWidth: 8,
												padding: 12
											}
										}
									}
								}
							});
						} catch (error) {
							console.error(`Error creating doughnut chart for ${elementId}:`, error);
							return null;
						}
					};
					
					// 각 차트 초기화
					try {
						// 시스템 리소스 차트들 (CPU, Memory, HDD) - Netdata 연동
						console.log('Initializing system resource charts with Netdata...');
						
						// CPU 차트 초기화 (빈 데이터로 시작, Netdata에서 데이터 로드)
						if (document.getElementById('cpuChart')) {
							cpuChart = createBasicLineChart('cpuChart', 
								[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 
								'CPU 사용률 (%)', '#4bc0c0', 1);
							console.log('✓ CPU Chart initialized');
						}
						
						// 메모리 차트 초기화 (빈 데이터로 시작, Netdata에서 데이터 로드)
						if (document.getElementById('memChart')) {
							memChart = createBasicLineChart('memChart', 
								[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 
								'메모리 사용률 (%)', '#4bc0c0', 1);
							console.log('✓ Memory Chart initialized');
						}
						
						// HDD 차트 초기화 (빈 데이터로 시작, Netdata에서 데이터 로드)
						if (document.getElementById('hddChart')) {
							hddChart = createBasicLineChart('hddChart', 
								[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 
								'HDD 사용률 (%)', '#4bc0c0', 1);
							console.log('✓ HDD Chart initialized');
						}
						
						// Netdata 데이터 로드 및 주기적 업데이트
						// Netdata 연결 재시도 함수
						async function tryConnectNetdata(maxRetries = 10, retryDelay = 2000) {
							for (let i = 0; i < maxRetries; i++) {
								try {
									const response = await fetch(`${NETDATA_URL}/api/v1/info`, {
										method: 'GET',
										headers: { 'Accept': 'application/json' }
									});
									if (response.ok) {
										console.log('✓ Netdata connection successful');
										clearNetdataError();
										return true;
									}
								} catch (error) {
									if (i < maxRetries - 1) {
										console.log(`Netdata 연결 시도 ${i + 1}/${maxRetries}...`);
										await new Promise(resolve => setTimeout(resolve, retryDelay));
									} else {
										console.error('✗ Netdata 연결 실패 - 최대 재시도 횟수 초과');
										const errorMsg = 'Netdata 연결 실패 - Docker 컨테이너가 실행 중인지 확인하세요';
										showNetdataError(errorMsg);
									}
								}
							}
							return false;
						}
						
						setTimeout(async () => {
							console.log('Testing Netdata connection...');
							
							// 먼저 연결 시도 (최대 10회, 2초 간격)
							const isConnected = await tryConnectNetdata(10, 2000);
							
							if (isConnected) {
								console.log('Loading Netdata data...');
								await updateSystemResources();
								
								// 5초마다 데이터 업데이트
								setInterval(async () => {
									await updateSystemResources();
								}, 5000);
								
								console.log('✓ Netdata integration started');
							} else {
								console.error('✗ Netdata is not available. Please check:');
								console.error('  1. Is Netdata running? (docker-compose up -d)');
								console.error('  2. Can you access http://localhost:19999 in your browser?');
								console.error('  3. Check CORS settings if accessing from different origin');
								
								// 연결 실패 시에도 주기적으로 재시도 (10초마다)
								setInterval(async () => {
									const retryConnected = await tryConnectNetdata(3, 1000);
									if (retryConnected) {
										await updateSystemResources();
										// 재연결 성공 시 정기 업데이트 시작
										setInterval(async () => {
											await updateSystemResources();
										}, 5000);
									}
								}, 10000);
							}
						}, 1000);
						
						// IAM 트래픽 차트
						if (document.getElementById('iamTrafficChart')) {
							createBasicLineChart('iamTrafficChart', 
								[1200, 800, 1500, 1800, 2000, 1600, 1000, 1200, 1400, 1800, 1600, 1200], 
								'트래픽', '#4bc0c0');
							console.log('✓ IAM Traffic Chart initialized');
						}
						
						// ZTNA 트래픽 차트
						if (document.getElementById('ztnaTrafficChart')) {
							createBasicLineChart('ztnaTrafficChart', 
								[800, 600, 1200, 1500, 1800, 1400, 900, 1000, 1300, 1600, 1400, 1000], 
								'트래픽', '#ff6b6b');
							console.log('✓ ZTNA Traffic Chart initialized');
						}
						
						// 유해물 차단 시스템 차트
						if (document.getElementById('harmfulBlockSystemChart')) {
							createBasicLineChart('harmfulBlockSystemChart', 
								[1800, 1850, 1920, 1983, 1950, 1900, 1880, 1850, 1820, 1800, 1780, 1750], 
								'전체', '#4bc0c0', 1);
							console.log('✓ Harmful Block System Chart initialized');
						}
						
						// ZTNA 블록 차트
						if (document.getElementById('ztnaBlockChart')) {
							createBasicLineChart('ztnaBlockChart', 
								[1983, 1850, 1920, 2100, 2080, 1983, 1950, 2000, 1900, 2050, 1980, 2020], 
								'접속자 수', '#36a2eb');
							console.log('✓ ZTNA Block Chart initialized');
						}
						
						// 유해물 차단 차트
						if (document.getElementById('harmfulBlockChart')) {
							createBasicLineChart('harmfulBlockChart', 
								[12, 8, 15, 18, 20, 16, 10, 12, 14, 18, 16, 12], 
								'차단 건수', '#4bc0c0', 1);
							console.log('✓ Harmful Block Chart initialized');
						}
						
						// CASB 블록 차트
						if (document.getElementById('casbBlockChart')) {
							createBasicLineChart('casbBlockChart', 
								[47, 38, 52, 41, 48, 45, 42, 39, 44, 47, 43, 46], 
								'감시 건수', '#9966ff');
							console.log('✓ CASB Block Chart initialized');
						}
						
						// AI 총 사용량 차트
						if (document.getElementById('aiTotalUsageChart')) {
							createBasicDoughnutChart('aiTotalUsageChart', 
								[20, 5, 12, 3, 8, 10, 32, 10],
								['메일', '메신저', 'SNS', '댓글', '업무공유', '웹하드', 'FTP', '생성형 AI']);
							console.log('✓ AI Total Usage Chart initialized');
						}
						
						// 워드 클라우드 초기화
						if (document.getElementById('wordCloud')) {
							const initWordCloud = () => {
								if (typeof WordCloud !== 'undefined') {
									const canvas = document.getElementById('wordCloud');
									if (canvas) {
										// 캔버스 크기 설정
										const container = canvas.parentElement;
										if (container) {
											canvas.width = container.offsetWidth || 400;
											canvas.height = container.offsetHeight || 300;
										}
										
										// 워드 클라우드 데이터
										const words = [
											['보고서', 50],
											['이력서', 40],
											['휴가추천', 25],
											['설계도', 30],
											['주식추천', 45],
											['스팸', 8],
											['삼성전자전망', 25],
											['AI추천주', 35],
											['수당', 20],
											['코인시세', 30],
											['주식동향', 15],
											['금가격', 40],
											['암호화', 6],
											['인증', 5],
											['PPT', 4],
											['연차', 3]
										];
										
										// 워드 클라우드 생성
										WordCloud(canvas, {
											list: words,
											weightFactor: 4,
											fontFamily: 'Pretendard, sans-serif',
											color: function(word, weight, fontSize, distance, theta) {
												const colors = ['#3b82f6', '#10b981', '#f59e0b', '#8b5cf6', '#ef4444', '#06b6d4', '#ec4899', '#eab308'];
												return colors[Math.floor(Math.random() * colors.length)];
											},
											rotateRatio: 0.3,
											rotationAngles: [0, 90],
											backgroundColor: 'transparent',
											gridSize: 8,
											drawOutOfBound: false,
											shrinkToFit: true,
											minSize: 6,
											maxSize: 60
										});
										
										console.log('✓ Word Cloud initialized');
									}
								} else {
									console.warn('WordCloud library not loaded');
								}
							};
							
							// 워드클라우드 라이브러리 로드 대기
							let retryCount = 0;
							const maxRetries = 20;
							const checkWordCloud = () => {
								if (typeof WordCloud !== 'undefined') {
									initWordCloud();
								} else if (retryCount < maxRetries) {
									retryCount++;
									setTimeout(checkWordCloud, 200);
								} else {
									console.warn('WordCloud library failed to load');
								}
							};
							checkWordCloud();
						}
						
						console.log('🎉 All charts initialized successfully!');
						
					} catch (error) {
						console.error('Error during chart initialization:', error);
					}
				};
				
				// 차트 초기화 실행
				initAllCharts();
			});
		</script>
	</body>
</html>